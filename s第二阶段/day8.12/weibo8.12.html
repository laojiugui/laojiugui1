<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>微博发布</title>
<style>
*{margin:0;padding:0;}
ul{list-style:none;width:900px;height:300px;margin:0 auto;}
li{margin-top:10px;}


#box{border:1px solid #666;position:absolute;left:100px;left:200px;display:none}
h1{height:50px;width:400px;background:blue}
span{float:right;}
#txt{width:300px;height:200px;margin-left:50px;}
</style>
</head>

<body>
<input id="btn" value="发布微博" type="button">
<ul>
	<li>防守打法防守打法法师打发士大夫范德萨发范德萨发防守打法防守打法</li>
	<li>防守打法防守打法法师打发士大夫范德萨发范德萨发防守打法防守打法</li>
	<li>防守打法防守打法法师打发士大夫范德萨发范德萨发防守打法防守打法</li>
	<li>防守打法防守打法法师打发士大夫范德萨发范德萨发防守打法防守打法</li>
	<li>防守打法防守打法法师打发士大夫范德萨发范德萨发防守打法防守打法</li>
	<li>防守打法防守打法法师打发士大夫范德萨发范德萨发防守打法防守打法</li>
	<li>防守打法防守打法法师打发士大夫范德萨发范德萨发防守打法防守打法</li>
</ul>

<div id="box" style="width:400px;height:300px;background:#fff">
	<h1><span>关闭&times;</span></h1>
	请输入你要发表的内容:
	<textarea id="txt" name="txt1" cols="16" rows=""></textarea>
	<input style="width:100px;height:20px;margin-left:50px;border:0;background:tan" id="btn1" value="发表" type="button">
	<input style="width:100px;height:20px;border:0;background:pink" id="btn2" value="取消" type="button">
</div>
<script>
var btn=document.getElementById("btn")
var box=document.getElementById("box")
var span=document.getElementsByTagName("span")[0]
var btn1=document.getElementById("btn1")
var btn2=document.getElementById("btn2")
var oul=document.getElementsByTagName("ul")[0]
var txt=document.getElementById("txt")               //以上都是获取他们的内容


btn.onclick=function(){      
	box.style.display="block"   	//当单击btn时,则box的属性值变为block;
	document.body.style.background="#ccc"
	btn.disabled="disabled"
	oul.disabled="disabled"
}


btn2.onclick=span.onclick=function(){
	box.style.display="none"                   //当单击btn2和span时,则box的属性值变为none;
	document.body.style.background=""
	btn.disabled=""
}


box.onmousedown=function(e){                // 创建当鼠标在box上按下的时候的匿名函数
	var event=window.event||e            //处理事件兼容
	var offsetL=e.offsetX
	var offsetT=e.offsetY                //创建新的变量保存得到的值
	document.onmousemove=function(e){          //创建鼠标移动匿名函数
		var event=window.event||e         //处理事件兼容
		var left1=e.clientX-offsetL
		var top1=e.clientY-offsetT              //获取坐标值与偏移坐标值的差值
		var bW=document.documentElement.clientWidth
		var bH=document.documentElement.clientHeight      //获取当前窗口的坐标
		var bow=parseInt(box.style.width)
		var boh=parseInt(box.style.height)         //获取他们本身的宽高!
		if(left1>bW-bow){          //增加水平if判断条件,
			left1=bW-bow            //条件为真时,执行的代码
		}else if(left1<0){         //创建i水平f判断条件
			left1=0              //当条件成立时,执行的代码
		}
		if(top1>bH-boh){              //创建上下if判断条件
			top1=bH-boh             //条件为真时,执行的代码
		}else if(top1<0){         //创建另一种上下if判断条件
			top1=0             //当条件为真时执行的代码
		}
		box.style.left=left1+"px"     //获取水平方向的值
		box.style.top=top1+"px"         //获取上下方向的值
		window.event?e.returnValue=false:e.preventDefault();           //阻止浏览器默认行为!!
	}
btn.disabled="disabled"            //按钮禁止属性
}


box.onmouseup=function(){          
	document.onmousemove=null          //当鼠标抬起时,要执行的代码
	
}

btn1.onclick=function(){          //创建单击匿名函数
	var tXt=txt.value                 //获取文本框的内容
	oul.innerHTML+="<li>"+tXt+"</li>"               //把获得的内容添加到ul中
	txt.value=""                        //清空文本框
}

</script>
</body>
</html>